let successPopup=document.querySelector(".success-popup");var cases={initCaseContent:function(e){let t=this;t.openModal(),$.ajax({url:"ajax.php",data:"action=showCase&id="+e,type:"GET",dataType:"json",cache:!1,beforesend:function(){},success:function(e){"ok"==(e.status||"error")&&t.showContent(e.content,e.url,e.pagetitle,e.related)}})},enableScroll:function(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.querySelector(".footer").style.right="0px",document.body.classList.remove("noscroll")},disableScroll:function(){let e=window.innerWidth>325?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.querySelector(".footer").style.right=e,document.body.classList.add("noscroll")},openModal:function(){let e=document.querySelector(".cases-modal");e.classList.contains("open")||(this.disableScroll(),e.classList.add("open")),e.querySelector(".modal__inner").innerHTML='<div class="modal-loading-icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          width="26.349px" height="26.35px" viewBox="0 0 26.349 26.35" style="enable-background:new 0 0 26.349 26.35;"\n          xml:space="preserve">\n         <g>\n           <circle cx="13.792" cy="3.082" r="3.082"/>\n           <circle cx="13.792" cy="24.501" r="1.849"/>\n           <circle cx="6.219" cy="6.218" r="2.774"/>\n           <circle cx="21.365" cy="21.363" r="1.541"/>\n           <circle cx="3.082" cy="13.792" r="2.465"/>\n           <circle cx="24.501" cy="13.791" r="1.232"/>\n           <path d="M4.694,19.84c-0.843,0.843-0.843,2.207,0,3.05c0.842,0.843,2.208,0.843,3.05,0c0.843-0.843,0.843-2.207,0-3.05\n             C6.902,18.996,5.537,18.988,4.694,19.84z"/>\n           <circle cx="21.364" cy="6.218" r="0.924"/>\n         </g>\n       </svg></div>',e.querySelector(".btn-main").style.opacity=0,e.querySelector(".btn-main").style.visibility="hidden"},closeModal:function(){let e=document.querySelector(".cases-modal");e.classList.remove("open"),e.querySelector(".btn-main").style.opacity=0,e.querySelector(".btn-main").style.visibility="hidden",setTimeout((()=>{e.querySelector(".modal__inner").innerHTML="",this.enableScroll()}),300),"undefined"!=typeof originalUrl&&window.history.pushState("","",originalUrl),"undefined"!=typeof originalTitle&&(document.title=originalTitle),"undefined"!=typeof onCloseRedirect&&(location.href=onCloseRedirect)},loaded:function(e){e.src=e.dataset.src,e.parentNode.querySelector("source")&&e.parentNode.querySelectorAll("source").forEach((e=>{e.srcset=e.dataset.srcset}))},loadImg:function(e,t){let o=this;o.loaded(e[t]),e[t].onload=function(){e[t].removeAttribute("data-src"),e[t].parentNode.querySelector("source")&&e[t].parentNode.querySelectorAll("source").forEach((e=>{e.removeAttribute("data-srcset")})),t<e.length-1&&(t++,o.loadImg(e,t))}},loadLazyImages:function(e=!0){let t=[];if(!0===e){t=document.querySelector(".cases-modal").querySelectorAll(".lazy")}else t=document.querySelector(".lazy");t.length>0&&this.loadImg(t,0)},showContent:function(e,t=!1,o=!1,c=""){let l=document.querySelector(".cases-modal");l.querySelector(".modal__inner").innerHTML=e,$(document).find(".modal__inner .case__body").append(c),l.querySelector(".btn-main").style.opacity=1,l.querySelector(".btn-main").style.visibility="visible",this.loadLazyImages(),!1!==t&&window.history.pushState("","",t),!1!==o&&(document.title=o)}};function formSuccess(e){let t=document.querySelector(".popup.active");t&&(successPopup.classList.add("active"),setTimeout((()=>{t.classList.remove("active")}),300))}window.addEventListener("load",(()=>{document.querySelector(".modal").addEventListener("click",(e=>{(e.target.classList.contains("modal__overlay")||e.target.classList.contains("modal__close"))&&cases.closeModal(document.querySelector(".fancy-modal"))})),$(document).on("click",".modal .js-pageup",(function(){$(".modal__overlay").stop().animate({scrollTop:0},1500)})),document.querySelector(".modal .js-pageup")&&document.querySelector(".modal__overlay").addEventListener("scroll",(()=>{document.querySelector(".modal__overlay").scrollTop>400?document.querySelector(".js-pageup").classList.add("show"):document.querySelector(".js-pageup").classList.remove("show")}))}));