const Sc=(t,e)=>Math.random()*(e-t)+t;class _c{constructor(t){this.containerSelector=t.containerSelector,this.elements=[...t.elements],this.restitution=t.restitution||.4,this.gravity=t.gravity||.2,this.interactCallback=t.interactCallback||null,this.updateCallback=t.updateCallback||null,this.triggerSelector=t.triggerSelector||null,this.element=document.querySelector(this.containerSelector),this.width=this.element.getBoundingClientRect().width,this.height=this.element.getBoundingClientRect().height,this.engine=Matter.Engine.create({gravity:{y:this.gravity}}),this.world=this.engine.world,this.render=Matter.Render.create({element:this.element,engine:this.engine,options:{width:this.width,height:this.height,wireframes:!1,background:"transparent"}}),this.setupMouse(),this.addWalls(),Matter.Render.run(this.render),this.runner=Matter.Runner.create(),Matter.Runner.run(this.runner,this.engine),this.addElements(),this.updateBodies()}addElements(){if(!Array.isArray(this.elements))return void console.error("Elements should be an array.");const t=this.elements.map((t=>{const e=t.getBoundingClientRect(),i=parseFloat(window.getComputedStyle(t).borderRadius),r=Matter.Bodies.rectangle(-200,-200,e.width,e.height,{isStatic:!1,restitution:this.restitution,label:t.getAttribute("data-target"),render:{fillStyle:"transparent",strokeStyle:"transparent"},chamfer:{radius:i}});return Matter.Events.on(this.runner,null===this.triggerSelector||void 0===this.triggerSelector?"beforeUpdate":"tick",(()=>{t.style.top=`${r.position.y}px`,t.style.left=`${r.position.x}px`,t.style.transform=`translate(-50%, -50%) rotate(${r.angle}rad)`})),r}));Matter.Composite.add(this.world,t)}addWalls(){const t={label:"wall",isStatic:!0,render:{fillStyle:"transparent",strokeStyle:"transparent"}},e=[Matter.Bodies.rectangle(0,-150,2*this.width,300,t),Matter.Bodies.rectangle(0,this.height+25,2*this.width,60,t),Matter.Bodies.rectangle(-150,0,300,2*this.height,t),Matter.Bodies.rectangle(this.width+150,0,300,2*this.height,t)];Matter.Composite.add(this.world,[...e])}setupMouse(){const t=Matter.Mouse.create(this.render.canvas),e=Matter.MouseConstraint.create(this.engine,{mouse:t,constraint:{stiffness:.1,render:{visible:!1}}});Matter.Composite.add(this.world,e),this.render.mouse=t,t.element.removeEventListener("mousewheel",t.mousewheel),t.element.removeEventListener("DOMMouseScroll",t.mousewheel),this.interactCallback&&this.interactCallback(e)}updateBodies(){if(null===this.triggerSelector||void 0===this.triggerSelector){const t=Matter.Composite.allBodies(this.engine.world),e="wall",i=this.height,r=this.width-10;let s=0;const n=setInterval((()=>{s++,t[s]?.label!==e&&t[s]&&(Matter.Body.setStatic(t[s],!1),Matter.Body.setPosition(t[s],{x:Sc(0,r),y:0}),Matter.Body.setVelocity(t[s],{x:Sc(0,10),y:Sc(0,5)}),t[s].position.y>i&&Matter.Body.setPosition(t[s],{x:Sc(0,r),y:0})),s===t.length&&clearInterval(n)}),100)}else ml.create({trigger:this.triggerSelector,once:!0,start:"top 50%",end:"bottom 50%",onEnter:()=>{const t=Matter.Composite.allBodies(this.engine.world),e=Math.floor(this.width);let i=1;const r=setInterval((()=>{i+=1;const s=Sc(0,e-50),n=t[i];if("wall"!==n?.label&&n){Matter.Body.setStatic(n,!1),Matter.Body.setPosition(n,{x:s,y:0}),Matter.Body.setVelocity(n,{x:Sc(0,10),y:Sc(0,5)});const t=n.bounds.max.x-n.bounds.min.x;n.position.x<t?Matter.Body.setPosition(n,{x:t,y:n.position.y}):n.position.x>this.width-t&&Matter.Body.setPosition(n,{x:this.width-t,y:n.position.y})}i===t.length&&clearInterval(r)}),100)}})}}if(console.log(document.querySelector(".sv-matter").getClientRects().top),document.querySelector(".sv-matter")){new _c({containerSelector:".sv-matter",elements:document.querySelectorAll(".sv-matter__btn"),restitution:.4,gravity:.2,interactCallback:function(t){const e=["btn--swap-color-1","btn--swap-color-2","btn--swap-color-3"];document.querySelectorAll("[data-target^='button']").forEach((i=>{const r=i.getAttribute("data-target");Matter.Events.on(t,"mousedown",(function(){const s=t.body?.label;s&&s===r&&(t=>{const i=e.findIndex((e=>t.classList.contains(e)));if(-1!==i){const r=(i+1)%e.length;t.classList.remove(e[i]),t.classList.add(e[r])}})(i)}))}))},updateCallback:function(){}})}