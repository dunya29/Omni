let mobMenu=document.querySelector(".header-mobile-menu");function openModal(e){let t=document.querySelector(".modal.open");t||mobMenu.classList.contains("menu--active")||disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{mobMenu.classList.contains("menu--active")||enableScroll()}),400)}const stories=document.querySelector(".stories"),story=document.querySelectorAll(".item-story");if(stories&&story.length>0){if(stories.querySelector(".swiper")){new Swiper(stories.querySelector(".swiper"),{slidesPerView:2,spaceBetween:10,observer:!0,observeparents:!0,watchSlidesProgress:!0,breakpoints:{1250:{slidesPerView:5,spaceBetween:20},960:{slidesPerView:4,spaceBetween:20},639:{slidesPerView:3,spaceBetween:20}},speed:800})}story.forEach((e=>{let t=e.querySelectorAll(".item-story__story").length;if(+e.getAttribute("data-watched")==t-1&&e.classList.add("seen"),t>1){let r=(e.querySelector(".item-story__bg-path").getTotalLength()-20*t)/t;e.querySelector(".item-story__bg-path").style.strokeDasharray=`${r} 20`}})),stories.addEventListener("click",(e=>{story.forEach(((t,r)=>{if(t.contains(e.target)){let l=r;document.querySelector(".footer").insertAdjacentHTML("afterend",`\n                <div class="modal story-modal">\n                     <button class="btn-reset modal__close">\n                         <svg xmlns="http://www.w3.org/2000/svg" width="42" height="42" viewBox="0 0 42 42" fill="none">\n                             <line x1="10.3935" y1="31.2531" x2="31.2531" y2="10.3935" stroke-width="1.5"></line>\n                             <line x1="31.2529" y1="31.6065" x2="10.3932" y2="10.7469" stroke-width="1.5"></line>\n                         </svg>\n                     </button>\n                    <div class="modal__overlay">\n                        <div class="modal__content">\n                            <div class="modal__inner">\n                                <div class="swiper">\n                                    <div class="swiper-wrapper">\n                                        ${Array.from(story).map((e=>`<div class="swiper-slide">\n                                                <div class="media-cover"></div>\n                                                <div class="story-modal__progress">\n                                                    ${Array.from(e.querySelectorAll(".item-story__story")).map((e=>'<div class="story-modal__progress-bar">\n                                                        <span></span>\n                                                    </div>')).join("")}\n                                                </div>\n                                        </div>`)).join("")}\n                                    </div>\n                                    <div class="swiper-btns">\n                                    <button type="button" class="btn-reset nav-btn nav-btn--prev">\n                                        <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" fill="none">\n                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M29.73 -0.00260162L0.216305 29.5111L29.73 59.0248L33.2952 55.4596L9.86778 32.0321H60V26.9901H9.86778L33.2952 3.56264L29.73 -0.00260162Z" fill="white"/>\n                                        </svg>\n                                    </button>\n                                    <button type="button" class="btn-reset nav-btn nav-btn--next">\n                                        <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" fill="none">\n                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M30.27 -0.00260162L59.7837 29.5111L30.27 59.0248L26.7048 55.4596L50.1322 32.0321H0V26.9901H50.1322L26.7048 3.56264L30.27 -0.00260162Z" fill="white"/>\n                                        </svg>\n                                    </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                `);const n=document.querySelector(".story-modal");let a,i,d,c=+t.getAttribute("data-watched"),y=new Swiper(".story-modal .swiper",{slidesPerView:1,observer:!0,observeParents:!0,initialSlide:l,navigation:{prevEl:".story-modal .nav-btn--prev",nextEl:".story-modal .nav-btn--next"},on:{navigationPrev:()=>{l--,clearTimeout(i),d.querySelectorAll(".story-modal__progress-bar span")[c].style.transitionDuration="0s",d.querySelectorAll(".story-modal__progress-bar")[c].classList.remove("seen"),c=+story[l].getAttribute("data-watched"),s()},navigationNext:()=>{l++,clearTimeout(i),d.querySelectorAll(".story-modal__progress-bar span")[c].style.transitionDuration="0s",d.querySelectorAll(".story-modal__progress-bar")[c].classList.remove("seen"),c=+story[l].getAttribute("data-watched"),s()}},speed:500});function s(){a=story[l].querySelectorAll(".item-story__story").length,d=n.querySelectorAll(".swiper-slide")[l];let e=story[l].querySelectorAll(".item-story__story")[c].cloneNode(!0);d.querySelector(".media-cover").innerHTML="",d.querySelector(".media-cover").appendChild(e),d.querySelectorAll(".story-modal__progress-bar").forEach(((e,t)=>{t<c&&(e.querySelector("span").style.transitionDuration="0s",e.classList.add("seen"))})),d.querySelectorAll("[data-src]").forEach((e=>{e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src")})),"video"==e.tagName.toLowerCase()?d.querySelector(".media-cover video").addEventListener("loadedmetadata",(e=>{let t=d.querySelector(".media-cover video").duration;d.querySelectorAll(".story-modal__progress-bar span")[c].style.transitionDuration=t+"s",d.querySelector(".media-cover video").play(),d.querySelector(".media-cover video").setAttribute("autoplay",""),d.querySelectorAll(".story-modal__progress-bar")[c].classList.add("seen"),i=setTimeout(o,100*t)})):(d.querySelectorAll(".story-modal__progress-bar span")[c].style.transitionDuration="1.5s",d.querySelectorAll(".story-modal__progress-bar")[c].classList.add("seen"),i=setTimeout(o,1500))}function o(){c<a-1?(c++,story[l].setAttribute("data-watched",c),s()):(story[l].querySelectorAll(".item-story__story").length-1==c&&story[l].classList.add("seen"),l<story.length-1?(l++,y.slideTo(l),c=+story[l].getAttribute("data-watched"),s()):closeModal(n))}openModal(n),s(),n.querySelector(".modal__close").addEventListener("click",(e=>{clearTimeout(i),closeModal(n),setTimeout((()=>{n.remove()}),400)}))}}))}))}